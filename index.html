<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SCP Test Generator</title>
  <style>
    body { font-family: Arial, sans-serif; background: #111; color: #eee; padding: 20px; }
    h1, h2 { color: #fff; }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input, textarea, button { margin-top: 5px; padding: 8px; width: 100%; max-width: 600px; border: 1px solid #555; border-radius: 4px; background: #222; color: #eee; }
    button { cursor: pointer; margin-top: 15px; background: #333; border: 1px solid #888; }
    .output { margin-top: 30px; padding: 15px; border: 1px solid #444; border-radius: 6px; background: #1a1a1a; max-width: 800px; white-space: pre-wrap; }
    .line { margin: 10px 0; padding: 8px; background: #222; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; }
    .line span { flex: 1; margin-right: 10px; }
    .copy-btn { background: #444; border: 1px solid #666; padding: 5px 10px; border-radius: 4px; cursor: pointer; color: #eee; }
  </style>
</head>
<body>
  <h1>SCP Test Generator</h1>

  <!-- Basic Info -->
  <label for="host">Host</label>
  <input type="text" id="host" placeholder="e.g., @DrSmith">

  <label for="scp">SCP Number</label>
  <input type="text" id="scp" placeholder="e.g., 096">

  <label for="class">Classification</label>
  <input type="text" id="class" placeholder="e.g., KETER">

  <label for="goal">Testing Objective</label>
  <textarea id="goal" placeholder="Clearly state the purpose and goals of the test"></textarea>

  <label for="materials">Materials Used</label>
  <textarea id="materials" placeholder="List equipment, tools, and resources utilized"></textarea>

  <label for="timeline">Testing Timeline</label>
  <textarea id="timeline" placeholder="1. First step taken&#10;2. Second step taken&#10;3. Continue as needed"></textarea>

  <label for="observations">Observations & Results</label>
  <textarea id="observations" placeholder="Detailed account of what was observed during testing"></textarea>

  <label for="analysis">Analysis</label>
  <textarea id="analysis" placeholder="Scientific interpretation of results and their significance"></textarea>

  <label for="approved">Approved By</label>
  <input type="text" id="approved" placeholder="e.g., @LeadResearcher">

  <!-- Personnel Inputs -->
  <h2>Personnel</h2>
  <label for="lead">Lead Researcher</label>
  <input type="text" id="lead" placeholder="@username">

  <label for="assistants">Assistant Researchers</label>
  <input type="text" id="assistants" placeholder="@username, @username or N/A">

  <label for="security">Security Department</label>
  <input type="text" id="security" placeholder="@username, @username, @username">

  <label for="medical">Medical Department</label>
  <input type="text" id="medical" placeholder="@username or N/A">

  <label for="classd">Class-D Personnel</label>
  <input type="text" id="classd" placeholder="Number used">

  <button onclick="generateAll()">Generate Outputs</button>

  <h2>Class-D Script</h2>
  <div id="scriptOutput" class="output" style="display:none;"></div>

  <h2>Full SCP Log</h2>
  <div id="logOutput" class="output" style="display:none;"></div>

  // ... (same as before up to personnel inputs)

<script>
  function copyLine(text) {
    navigator.clipboard.writeText(text).then(() => { alert("Copied: " + text); });
  }

  function formatPersonnel(input) {
    const trimmed = input.trim();
    return trimmed === "" ? "N/A" : trimmed;
  }

  function generateAll() {
    const host = formatPersonnel(document.getElementById("host").value);
    const scp = document.getElementById("scp").value || "###";
    const classification = document.getElementById("class").value || "Unclassified";
    const goal = document.getElementById("goal").value || "[goal not specified]";
    const materials = document.getElementById("materials").value || "N/A";
    const timeline = document.getElementById("timeline").value || "N/A";
    const observations = document.getElementById("observations").value || "N/A";
    const analysis = document.getElementById("analysis").value || "N/A";
    const approved = formatPersonnel(document.getElementById("approved").value);

    // Personnel
    const lead = formatPersonnel(document.getElementById("lead").value);
    const assistants = formatPersonnel(document.getElementById("assistants").value);
    const security = formatPersonnel(document.getElementById("security").value);
    const medical = formatPersonnel(document.getElementById("medical").value);
    const classd = formatPersonnel(document.getElementById("classd").value);

    // Get today's date
    const today = new Date();
    const dateStr = today.toLocaleDateString('en-GB');

    // Class-D Script
    const scriptLines = [
      `Hello Class-Ds. We will be testing on SCP-${scp}. Please line up.`,
      `The goal of today’s test is to ${goal}.`,
      `Security personnel will ensure your safety, provided you comply with all instructions.`,
      `Any deviation or failure to cooperate will result in immediate termination.`,
      `Do you understand?`
    ];

    const scriptDiv = document.getElementById("scriptOutput");
    scriptDiv.innerHTML = "";
    scriptLines.forEach(line => {
      const div = document.createElement("div");
      div.className = "line";

      const span = document.createElement("span");
      span.textContent = line;

      const button = document.createElement("button");
      button.className = "copy-btn";
      button.textContent = "Copy";
      button.onclick = () => copyLine(line);

      div.appendChild(span);
      div.appendChild(button);
      scriptDiv.appendChild(div);
    });
    scriptDiv.style.display = "block";

    // SCP Log
    const logText = 
`--
**SCP:** SCP-${scp}
**Classification:** ${classification}
**Date:** ${dateStr}

**Personnel:**
> **Lead Researcher:** ${lead}
> **Assistant Researchers:** ${assistants}
> **Security Department:** ${security}
> **Medical Department:** ${medical}
> **Class-D Personnel:** ${classd}
> **Other Departments:** N/A
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

**Testing Objective:**
> ${goal}

**Materials Used:**
> ${materials}

**Testing Timeline:**
> ${timeline}

**Observations & Results:**
> ${observations}
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

**Analysis:**
> ${analysis}
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

**Approved By:** ${approved}
**Logged By:** ${host}
--`;

    const logDiv = document.getElementById("logOutput");
    logDiv.textContent = logText;
    logDiv.style.display = "block";
  }
</script>

</body>
</html>
