<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SCP Test Generator</title>
<style>
body { font-family: Arial, sans-serif; background: #111; color: #eee; padding: 20px; }
h1,h2 { color: #fff; }
label { display: block; margin-top: 10px; font-weight: bold; }
input, textarea, button { margin-top: 5px; padding: 8px; border-radius: 4px; border: 1px solid #555; background: #222; color: #eee; }
button { cursor: pointer; margin-top: 10px; }
.section { border:1px solid #555; border-radius:6px; padding:15px; margin-top:15px; background:#1a1a1a; }
.row { display: flex; gap:10px; flex-wrap: wrap; }
.row input { flex:1; min-width:100px; }
.output { margin-top:20px; padding:15px; border:1px solid #444; border-radius:6px; background:#1a1a1a; white-space: pre-wrap; max-width:800px; }
.line { margin:10px 0; padding:8px; background:#222; border-radius:4px; display:flex; justify-content:space-between; align-items:center; }
.line span { flex:1; margin-right:10px; }
.copy-btn { background:#444; border:1px solid #666; padding:5px 10px; border-radius:4px; cursor:pointer; color:#eee; }
.timeline-step { display:flex; margin-top:5px; }
.timeline-step input { flex:1; margin-right:5px; }
.material-btn { margin:5px; background:#444; border:1px solid #666; color:#eee; padding:5px 10px; border-radius:4px; cursor:pointer; }
.material-btn.selected { background:#28a745; }
</style>
</head>
<body>
<h1>SCP Test Generator</h1>

<!-- Basic Info Row -->
<div class="section row">
  <div style="flex:1;"><label>Host</label><input type="text" id="host" placeholder="@YourName"></div>
  <div style="flex:1;"><label>SCP Number</label><input type="text" id="scp" placeholder="e.g., 096"></div>
  <div style="flex:1;"><label>Classification</label><input type="text" id="class" placeholder="e.g., KETER"></div>
</div>

<!-- Testing Objective & Analysis -->
<div class="section">
  <label>Testing Objective</label>
  <textarea id="goal" placeholder="Clearly state the purpose and goals of the test"></textarea>

  <label>Observations & Results</label>
  <textarea id="observations" placeholder="Detailed account of what was observed during testing"></textarea>

  <label>Analysis</label>
  <textarea id="analysis" placeholder="Scientific interpretation of results and their significance"></textarea>

  <label>Approved By</label>
  <input type="text" id="approved" placeholder="@Approver">
</div>

<!-- Personnel -->
<div class="section">
<h2>Personnel</h2>
<label>Assistant Researchers</label>
<input type="text" id="assistants" placeholder="@username, @username or N/A">
<label>Security Department</label>
<input type="text" id="security" placeholder="@username, @username, @username">
<label>Medical Department</label>
<input type="text" id="medical" placeholder="@username or N/A">
<label>Class-D Personnel</label>
<input type="text" id="classd" placeholder="Number used">
</div>

<!-- Timeline -->
<div class="section">
<h2>Testing Timeline</h2>
<div id="timelineContainer"></div>
</div>

<!-- Materials Used -->
<div class="section">
<h2>Materials Used</h2>
<div id="materialsContainer"></div>
</div>

<button onclick="generateAll()">Generate Outputs</button>

<h2>Class-D Script</h2>
<div id="scriptOutput" class="output" style="display:none;"></div>

<h2>Full SCP Log</h2>
<button onclick="copyAllLog()">Copy All SCP Log</button>
<div id="logOutput" class="output" style="display:none;"></div>

<script>
const formatPersonnel=input=>input.trim()===""?"N/A":input.trim();

const timelineContainer=document.getElementById("timelineContainer");
function addTimelineStep(value=""){
  const div=document.createElement("div"); div.className="timeline-step";
  const input=document.createElement("input"); input.type="text"; input.value=value; input.placeholder="Step description";
  input.onkeydown=function(e){
    if(e.key==="Enter"){ e.preventDefault(); addTimelineStep(); this.blur(); timelineContainer.lastChild.querySelector("input").focus(); }
    else if(e.key==="Backspace" && this.value===""){ e.preventDefault(); if(timelineContainer.children.length>1){ timelineContainer.removeChild(div); timelineContainer.lastChild.querySelector("input").focus(); }}
  };
  div.appendChild(input); timelineContainer.appendChild(div); input.focus();
}
addTimelineStep(); // start with one step

// Materials Used
const materialsList=["Handcuffs","Taser","UV Flashlight","Lavender","Cage","Water Gun","Flashlight","Scrambler Googles"];
const materialsContainer=document.getElementById("materialsContainer");
materialsList.forEach(item=>{
  const btn=document.createElement("button"); btn.textContent=item; btn.className="material-btn";
  btn.onclick=()=>{ btn.classList.toggle("selected"); };
  materialsContainer.appendChild(btn);
});
function getSelectedMaterials(){
  const selected=[]; document.querySelectorAll("#materialsContainer button.selected").forEach(b=>selected.push(b.textContent));
  return selected.length>0?selected.join(", "):"N/A";
}

// Copy functions
function copyLine(text){navigator.clipboard.writeText(text);}
function copyAllLog(){navigator.clipboard.writeText(document.getElementById("logOutput").textContent);}

// Generate outputs
function generateAll(){
  const host=formatPersonnel(document.getElementById("host").value);
  const scp=document.getElementById("scp").value||"###";
  const classification=document.getElementById("class").value||"Unclassified";
  const goal=document.getElementById("goal").value||"[goal not specified]";
  const observations=document.getElementById("observations").value||"N/A";
  const analysis=document.getElementById("analysis").value||"N/A";
  const approved=formatPersonnel(document.getElementById("approved").value);
  const assistants=formatPersonnel(document.getElementById("assistants").value);
  const security=formatPersonnel(document.getElementById("security").value);
  const medical=formatPersonnel(document.getElementById("medical").value);
  const classd=formatPersonnel(document.getElementById("classd").value);
  const materials=getSelectedMaterials();

  // timeline steps
  let timelineSteps=[];
  timelineContainer.querySelectorAll("input").forEach((inp,i)=>{ if(inp.value.trim()!=="") timelineSteps.push(`> ${i+1}. ${inp.value.trim()}`); });
  if(timelineSteps.length===0) timelineSteps=["N/A"];

  // date
  const today=new Date(); const dateStr=today.toLocaleDateString('en-GB');

  // Class-D Script
  const scriptLines=[
    `Hello Class-Ds. We will be testing on SCP-${scp}. Please line up.`,
    `The goal of today’s test is to ${goal}.`,
    `Security personnel will ensure your safety, provided you comply with all instructions.`,
    `Any deviation or failure to cooperate will result in immediate termination.`,
    `Do you understand?`
  ];
  const scriptDiv=document.getElementById("scriptOutput");
  scriptDiv.innerHTML="";
  scriptLines.forEach(line=>{
    const div=document.createElement("div"); div.className="line";
    const span=document.createElement("span"); span.textContent=line;
    const button=document.createElement("button"); button.className="copy-btn"; button.textContent="Copy"; button.onclick=()=>copyLine(line);
    div.appendChild(span); div.appendChild(button); scriptDiv.appendChild(div);
  });
  scriptDiv.style.display="block";

  // SCP Log
  const logText=
`--
**SCP:** SCP-${scp}
**Classification:** ${classification}
**Date:** ${dateStr}

**Personnel:**
> **Lead Researcher:** ${host}
> **Assistant Researchers:** ${assistants}
> **Security Department:** ${security}
> **Medical Department:** ${medical}
> **Class-D Personnel:** ${classd}
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

**Testing Objective:**
> ${goal}

**Materials Used:**
> ${materials}

**Testing Timeline:**
${timelineSteps.join("\n")}

**Observations & Results:**
> ${observations}
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

**Analysis:**
> ${analysis}
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

**Approved By:** ${approved}
**Logged By:** ${host}
--`;
  const logDiv=document.getElementById("logOutput");
  logDiv.textContent=logText; logDiv.style.display="block";
}
</script>
</body>
</html>
