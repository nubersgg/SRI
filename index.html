<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SCP Test Generator</title>
<link rel="icon" type="image/x-icon" href="main/favicon.ico">
<style>
  body {
    background: #1e1e1e;
    color: #e0e0e0;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
  }
  h1, h2 {
    color: #76ff76;
  }
  .row {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
  }
  input, textarea {
    background: #2b2b2b;
    color: #fff;
    border: 1px solid #555;
    border-radius: 5px;
    padding: 8px;
    flex: 1;
  }
  textarea {
    resize: none;
    min-height: 60px;
    width: 100%;
    overflow-y: hidden;
  }
  .box {
    background: #252525;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
  }
  .personnel-group label {
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
  }
  .personnel-group input {
    display: block;
    margin-bottom: 5px;
    width: 100%;
  }
  button.copy {
    background: #3a3a3a;
    border: none;
    color: #76ff76;
    padding: 5px 10px;
    margin-top: 5px;
    cursor: pointer;
    border-radius: 5px;
  }
</style>
</head>
<body>
  <h1>SCP Test Generator</h1>

  <!-- Quick Tab Rename -->
  <div class="box">
    <label>Tab Name</label>
    <input type="text" id="tabName" placeholder="Enter tab name and press Enter">
  </div>

  <!-- Top row inputs -->
  <div class="box row">
    <input type="text" id="host" placeholder="Host">
    <input type="text" id="scp" placeholder="SCP (e.g., SCP-096)">
    <input type="text" id="classification" placeholder="Classification (e.g., KETER)">
  </div>

  <!-- Personnel -->
  <div class="box">
    <h2>Personnel</h2>

    <div class="personnel-group" id="assistants">
      <label>Assistant Researchers</label>
      <input type="text" placeholder="@username">
    </div>

    <div class="personnel-group" id="security">
      <label>Security Department</label>
      <input type="text" placeholder="@username">
    </div>

    <div class="personnel-group" id="medical">
      <label>Medical Department</label>
      <input type="text" placeholder="@username">
    </div>

    <div class="personnel-group" id="cd">
      <label>Class-D Personnel</label>
      <input type="text" placeholder="@player">
    </div>

    <div class="personnel-group" id="mtf">
      <label>Mobile Task Force</label>
      <input type="text" placeholder="@username">
    </div>
  </div>

  <!-- Script / Log boxes (shortened for demo) -->
  <div class="box">
    <h2>Testing Objective</h2>
    <textarea placeholder="Clearly state the purpose and goals of the test"></textarea>
  </div>
  <div class="box">
    <h2>Observations & Results</h2>
    <textarea placeholder="Detailed account of what was observed during testing"></textarea>
  </div>
  <div class="box">
    <h2>Analysis</h2>
    <textarea placeholder="Scientific interpretation of results and their significance"></textarea>
  </div>

<script>
// Tab renaming
const tabInput = document.getElementById('tabName');
tabInput.addEventListener('keydown', e => {
  if (e.key === 'Enter') {
    document.title = tabInput.value || 'SCP Test Generator';
    tabInput.blur();
  }
});

// Auto-expand textarea
const textareas = document.querySelectorAll('textarea');
textareas.forEach(t => {
  t.addEventListener('input', () => {
    t.style.height = 'auto';
    t.style.height = t.scrollHeight + 'px';
  });
});

// Dynamic personnel inputs (Enter = add, Backspace empty = delete)
function setupDynamicInputs(groupId, prefix) {
  const group = document.getElementById(groupId);
  group.addEventListener('keydown', e => {
    const target = e.target;
    if (e.key === 'Enter') {
      e.preventDefault();
      const newInput = document.createElement('input');
      newInput.type = 'text';
      newInput.placeholder = groupId === 'cd' ? '@player' : '@username';
      group.appendChild(newInput);
      newInput.focus();
      updateCDLabels();
    } else if (e.key === 'Backspace' && !target.value && group.children.length > 1) {
      e.preventDefault();
      group.removeChild(target);
      updateCDLabels();
    }
  });
}

function updateCDLabels() {
  const cdGroup = document.getElementById('cd');
  const inputs = cdGroup.querySelectorAll('input');
  inputs.forEach((input, i) => {
    input.dataset.index = i + 1;
  });
}

['assistants','security','medical','cd','mtf'].forEach(g => setupDynamicInputs(g));
</script>
</body>
</html>
